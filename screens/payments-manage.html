<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>P≈Çatno≈õci ‚Ä¢ Meet App</title>
  <link rel="stylesheet" href="../css/iphone-frame.css">
  <style>
    .table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }
    .table thead th {
      text-align: left;
      padding: 8px;
      border-bottom: 2px solid var(--border);
      font-weight: 600;
      color: var(--muted);
      font-size: 12px;
    }
    .table tbody td {
      padding: 8px;
      border-bottom: 1px solid var(--border);
    }
    .table tbody tr:last-child td {
      border-bottom: none;
    }
    .table tbody tr.current-user {
      background: #dcfce7;
    }
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    .modal {
      background: white;
      border-radius: 16px;
      padding: 20px;
      max-width: 320px;
      margin: 0 20px;
    }
    input, select {
      margin-bottom: 16px;
    }
  </style>
</head>

<body>
  <div class="phone">
    <div class="app">
      <div class="status-bar-right"></div>

      <div class="topbar">
        <a href="event-details.html">‚Üê Wr√≥ƒá</a>
        <div class="title">P≈Çatno≈õci</div>
        <span></span>
      </div>

      <div class="content">
        <div class="muted">≈ör 28.10 ‚Ä¢ 18:00 - 20:00 ‚Ä¢ Hala Sportowa Malta</div>

        <!-- Stats -->
        <div class="card" style="margin-top:12px">
          <div style="display:flex;justify-content:space-around;text-align:center">
            <div>
              <div class="h1" style="margin:0;color:var(--success)">4/5</div>
              <div class="muted" style="font-size:12px">Op≈Çacone</div>
            </div>
            <div style="border-left:1px solid var(--border)"></div>
            <div>
              <div class="h1" style="margin:0;color:var(--primary)">60 PLN</div>
              <div class="muted" style="font-size:12px">Zebrano</div>
            </div>
            <div style="border-left:1px solid var(--border)"></div>
            <div>
              <div class="h1" style="margin:0;color:var(--danger)">15 PLN</div>
              <div class="muted" style="font-size:12px">Brakuje</div>
            </div>
          </div>
        </div>

        <!-- Payment table -->
        <div class="card" style="margin-top:12px">
          <div class="h2">Lista p≈Çatno≈õci</div>
          <table class="table" id="payTable" style="margin-top:8px">
            <thead>
              <tr>
                <th>Gracz</th>
                <th>Status</th>
                <th>Metoda</th>
                <th>Czas</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Anna S.</td>
                <td style="font-size:16px">üí∞</td>
                <td>Blik</td>
                <td>18:55</td>
              </tr>
              <tr>
                <td>Kuba M.</td>
                <td>
                  <button class="btn-success btn-small" data-mark data-name="Kuba M.">Oznacz</button>
                </td>
                <td>‚Äî</td>
                <td>‚Äî</td>
              </tr>
              <tr>
                <td>Tomasz W.</td>
                <td style="font-size:16px">üí∞</td>
                <td>Cash</td>
                <td>18:02</td>
              </tr>
              <tr>
                <td>Micha≈Ç S.</td>
                <td style="font-size:16px">üí∞</td>
                <td>Transfer</td>
                <td>16:45</td>
              </tr>
              <tr>
                <td>Ewa L.</td>
                <td style="font-size:16px">üí∞</td>
                <td>Blik</td>
                <td>17:35</td>
              </tr>
              <tr>
                <td colspan="4" class="muted" style="text-align:center;font-size:12px">
                  ... 7 wolnych miejsc
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Payment method modal -->
        <div id="paymentModal" class="modal-overlay" style="display:none">
          <div class="modal">
            <div class="h2">Oznacz jako op≈Çacone</div>
            <div class="muted" id="playerName" style="margin-bottom:12px"></div>

            <div>
              <label for="paymentMethod">Metoda p≈Çatno≈õci</label>
              <select id="paymentMethod">
                <option>Blik</option>
                <option>Cash</option>
                <option>Transfer</option>
                <option>Karta</option>
              </select>
            </div>

            <div style="display:flex;gap:8px;margin-top:16px">
              <button class="btn btn-success" style="flex:1" id="confirmPayment">Potwierd≈∫</button>
              <button class="btn btn-ghost" id="cancelPayment">Anuluj</button>
            </div>
          </div>
        </div>

        <!-- Actions -->
        <div class="card" style="margin-top:12px">
          <div class="h2">Akcje</div>
          <div style="display:flex;flex-direction:column;gap:8px;margin-top:8px">
            <button class="btn btn-ghost btn-small">üìß Przypomnienie do nieop≈Çaconych</button>
            <button class="btn btn-ghost btn-small">‚úì Oznacz wszystkich jako op≈Çaconych</button>
          </div>
        </div>

        <div style="margin-top:16px">
          <a href="event-details.html" class="btn btn-primary" style="width:100%">Gotowe</a>
        </div>

        <script>
          let currentRow = null;

          document.querySelectorAll('[data-mark]').forEach(btn => {
            btn.addEventListener('click', () => {
              currentRow = btn.closest('tr');
              const playerName = btn.getAttribute('data-name');
              document.getElementById('playerName').textContent = playerName;
              document.getElementById('paymentModal').style.display = 'flex';
            });
          });

          document.getElementById('confirmPayment').addEventListener('click', () => {
            if (currentRow) {
              const method = document.getElementById('paymentMethod').value;
              const now = new Date();
              const time = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');

              currentRow.cells[1].innerHTML = '<span style="font-size:16px">üí∞</span>';
              currentRow.cells[2].textContent = method;
              currentRow.cells[3].textContent = time;

              document.getElementById('paymentModal').style.display = 'none';
              alert('P≈Çatno≈õƒá potwierdzona!');
            }
          });

          document.getElementById('cancelPayment').addEventListener('click', () => {
            document.getElementById('paymentModal').style.display = 'none';
          });

          document.getElementById('paymentModal').addEventListener('click', (e) => {
            if (e.target.id === 'paymentModal') {
              document.getElementById('paymentModal').style.display = 'none';
            }
          });
        </script>

      </div>

      <div class="bottom">
        <a href="events-list.html">
          üìÖ
          <div>Wydarzenia</div>
        </a>
        <a href="map-home.html">
          üó∫Ô∏è
          <div>Mapa</div>
        </a>
        <a href="user-profile.html">
          üë§
          <div>Profil</div>
        </a>
      </div>
    </div>
  </div>

  <script src="../js/mock-data.js"></script>
  <script src="../js/app.js"></script>
</body>
</html>
